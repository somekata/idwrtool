<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>IDWR Viewer ガイド</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
        background: #fafafa;
        padding: 1.2rem 1.6rem;
        color: #222;
        line-height: 1.6;
        max-width: 900px;
        margin: 0 auto;
      }
      h1 {
        margin-top: 0;
        font-size: 1.6rem;
        border-left: 6px solid #2563eb;
        padding-left: 0.5rem;
      }
      h2 {
        margin-top: 1.8rem;
        border-left: 4px solid #2563eb;
        padding-left: 0.5rem;
      }
      code {
        background: #e5e7eb;
        padding: 0.1rem 0.3rem;
        border-radius: 3px;
      }
      .back {
        display: inline-block;
        margin-top: 1rem;
        padding: 0.4rem 0.8rem;
        background: #2563eb;
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h1>IDWR Viewer ガイド</h1>
    <p>
      IDWR の weekly / yearly
      データを読み込み、発生動向を可視化する「Viewer」の使い方を説明します。
    </p>

    <h2>1. 対応している CSV フォーマット</h2>

    <h3>▼ weekly（週別）</h3>
    <pre>
year,week,disease,prefecture,cases
2024,1,結核,大阪府,10
2024,2,結核,大阪府,8
...
</pre
    >

    <h3>▼ yearly（年別）</h3>
    <pre>
year,disease,prefecture,cases
2020,結核,大阪府,720
2021,結核,大阪府,650
...
</pre
    >

    <p>列名は必ず上記と同じである必要があります。</p>

    <h2>2. 使い方</h2>

    <h3>① データ種別を選択（weekly / yearly）</h3>
    <p>
      画面上部で CSV の種類を選択します。<br />
      weekly を選ぶと「週別の比較モード」が有効になります。
    </p>

    <h3>② CSV ファイルを読み込み</h3>
    <p>ローカルの CSV をそのまま読み込むだけです。サーバ送信は行いません。</p>

    <h3>③ 値の一覧が UI に反映</h3>
    <ul>
      <li>利用可能な年一覧</li>
      <li>利用可能な感染症名一覧</li>
    </ul>

    <h3>④ 比較モードを選択（weekly のみ）</h3>
    <ul>
      <li>同一年で複数感染症を比較（byDisease）</li>
      <li>同一感染症で複数年を比較（byYear）</li>
      <li>複数年をつないで表示（tandem）</li>
    </ul>

    <h3>⑤ グラフ描画 → モーダル表示</h3>
    <p>
      「グラフを描画」ボタンでモーダルウィンドウが開き、拡大表示のグラフが表示されます。
    </p>

    <h3>⑥ HTML としてダウンロード</h3>
    <p>
      モーダル下部の「HTMLとしてダウンロード」で、PNG画像を埋め込んだ HTML
      が保存できます。
    </p>

    <h2>3. よくあるエラー</h2>

    <h3>● 列名が一致しない</h3>
    <p>
      <code>year</code> や
      <code>disease</code> が別名になっていると読み込めません。
    </p>

    <h3>● 年が選べない</h3>
    <p>
      CSV の中に year が文字列扱いになっている場合があります。Excel
      で余計な空白を除去してください。
    </p>

    <h2>4. 今後の拡張予定</h2>
    <ul>
      <li>Manager（データ登録・加工ツール）</li>
      <li>自動ダウンロード支援</li>
      <li>感染症分類 JSON との連動</li>
    </ul>

    <a href="../index.html" class="back">← エントリーページに戻る</a>
  </body>
</html>
